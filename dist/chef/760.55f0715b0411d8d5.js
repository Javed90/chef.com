"use strict";(self.webpackChunkchef=self.webpackChunkchef||[]).push([[760],{2760:(_o,y,d)=>{d.r(y),d.d(y,{CouponsModule:()=>mo});var C=d(6019),D=d(8994),p=d(7537),o=d(3668),E=d(8260),O=d(4499),v=d(7962),R=d(4522);let T=(()=>{class c{constructor(t){this.httpClnt=t,this.apiUrl=E.N.apiUrl,this.objectSource=new O.X(""),this.currentObject=this.objectSource.asObservable()}addCoupon(t){return this.httpClnt.post(this.apiUrl+v.y.addCoupon,t)}getCoupon(){return this.httpClnt.post(this.apiUrl+v.y.GetCoupons,{})}updateCoupon(t){return this.httpClnt.post(this.apiUrl+v.y.updateCoupon,t)}deleteCoupon(t){return this.httpClnt.post(this.apiUrl+v.y.deleteCoupon+t,{})}getCountriesList(){return this.httpClnt.post(this.apiUrl+v.y.getCountriesList,{})}getCitiesList(t){return this.httpClnt.get(this.apiUrl+v.y.getCitiesList+t)}changeObject(t){this.objectSource.next(t)}sendcouponData(t){localStorage.setItem("couponData",JSON.stringify(t))}getcouponData(){return localStorage.getItem("couponData")}clearcouponData(){localStorage.removeItem("couponData")}sendAllcouponData(t){localStorage.setItem("AllcouponData",JSON.stringify(t))}getAllcouponData(){return localStorage.getItem("AllcouponData")}clearAllcouponData(){localStorage.removeItem("AllcouponData")}}return c.\u0275fac=function(t){return new(t||c)(o.LFG(R.eN))},c.\u0275prov=o.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();var V=d(5738),L=d(2524),M=d(959),Q=d(5339),A=d(7875),x=d(2387),J=d(9256),Z=d(1690),F=d(8360),q=d(7732);function k(c,u){1&c&&(o.TgZ(0,"div",33),o._uU(1," Coupon Code is required "),o.qZA())}function Y(c,u){1&c&&(o.TgZ(0,"div",33),o._uU(1," Coupon code already exists "),o.qZA())}function H(c,u){1&c&&(o.TgZ(0,"div",33),o._uU(1," Usage Limit Per User is required "),o.qZA())}function j(c,u){1&c&&(o.TgZ(0,"div",33),o._uU(1," Minimum required number is 1. "),o.qZA())}function B(c,u){1&c&&(o.TgZ(0,"div",33),o._uU(1," Usage of Discount Code is required "),o.qZA())}function G(c,u){1&c&&(o.TgZ(0,"div",33),o._uU(1," Minimum required number is 1. "),o.qZA())}function z(c,u){1&c&&(o.TgZ(0,"div",33),o._uU(1," Coupon From Date is required "),o.qZA())}function W(c,u){1&c&&(o.TgZ(0,"div",33),o._uU(1," Coupon To date is required "),o.qZA())}function K(c,u){1&c&&(o.TgZ(0,"div",44),o._uU(1," Choose Category(Choose Product OR Choose Recipe OR Choose Collection) is required "),o.qZA())}function $(c,u){if(1&c){const t=o.EpF();o.TgZ(0,"div",6),o.TgZ(1,"div",7),o.TgZ(2,"label",34),o._uU(3,"Choose Category"),o.qZA(),o.TgZ(4,"ng-multiselect-dropdown",35),o.NdJ("onSelect",function(i){return o.CHM(t),o.oxw().selectCategoryEvent(i)})("onSelectAll",function(i){return o.CHM(t),o.oxw().onSelectAllCategory(i)})("onDeSelect",function(i){return o.CHM(t),o.oxw().DropDownClose(i)})("onDeSelectAll",function(i){return o.CHM(t),o.oxw().onDeSelectAllCategory(i)}),o.qZA(),o.qZA(),o.TgZ(5,"div",7),o.TgZ(6,"label",34),o._uU(7,"Choose Sub-Category"),o.qZA(),o.TgZ(8,"ng-multiselect-dropdown",36),o.NdJ("onSelect",function(i){return o.CHM(t),o.oxw().selectSubCategoryEvent(i)})("onSelectAll",function(i){return o.CHM(t),o.oxw().onSelectAllSubCategory(i)})("onDeSelect",function(i){return o.CHM(t),o.oxw().DropSubClose(i)})("onDeSelectAll",function(i){return o.CHM(t),o.oxw().onDeSelectAllSubCategory(i)}),o.qZA(),o.qZA(),o.TgZ(9,"div",37),o.TgZ(10,"label",34),o._uU(11,"Choose Product"),o.qZA(),o.TgZ(12,"ng-multiselect-dropdown",38),o.NdJ("onSelect",function(i){return o.CHM(t),o.oxw().onItemSelect(i)})("onSelectAll",function(i){return o.CHM(t),o.oxw().onSelectAllProducts(i)})("onDeSelect",function(i){return o.CHM(t),o.oxw().DropDownProductClose(i)})("onDeSelectAll",function(i){return o.CHM(t),o.oxw().onDeSelectProducts(i)}),o.qZA(),o.qZA(),o.TgZ(13,"div",39),o.TgZ(14,"div",40),o.TgZ(15,"span"),o._uU(16,"Or"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(17,"div",37),o.TgZ(18,"label",34),o._uU(19,"Choose Recipes"),o.qZA(),o.TgZ(20,"ng-multiselect-dropdown",41),o.NdJ("onSelect",function(i){return o.CHM(t),o.oxw().onItemSelectRecipe(i)})("onSelectAll",function(i){return o.CHM(t),o.oxw().onSelectAllRecipe(i)})("onDeSelect",function(i){return o.CHM(t),o.oxw().DropDownRecipeClose(i)})("onDeSelectAll",function(i){return o.CHM(t),o.oxw().onDeSelectRecipes(i)}),o.qZA(),o.qZA(),o.TgZ(21,"div",39),o.TgZ(22,"div",40),o.TgZ(23,"span"),o._uU(24,"Or"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(25,"div",37),o.TgZ(26,"label",34),o._uU(27,"Choose Collections"),o.qZA(),o.TgZ(28,"ng-multiselect-dropdown",42),o.NdJ("onSelect",function(i){return o.CHM(t),o.oxw().onItemSelectCollection(i)})("onSelectAll",function(i){return o.CHM(t),o.oxw().onSelectAllCollection(i)})("onDeSelect",function(i){return o.CHM(t),o.oxw().DropDownCollectionClose(i)})("onDeSelectAll",function(i){return o.CHM(t),o.oxw().onDeSelectCollections(i)}),o.qZA(),o.qZA(),o.YNc(29,K,2,0,"div",43),o.qZA()}if(2&c){const t=o.oxw();o.xp6(4),o.Q6J("settings",t.dropdownCategorySettings)("data",t.allCategories),o.xp6(4),o.Q6J("settings",t.dropdownSubCategorySettings)("data",t.subCategoryNames),o.xp6(4),o.Q6J("settings",t.dropdownSettings)("data",t.searchProducts),o.xp6(8),o.Q6J("settings",t.dropdownRecipeSettings)("data",t.allRecipes),o.xp6(8),o.Q6J("settings",t.dropdownCollectionsSettings)("data",t.allCollections),o.xp6(1),o.Q6J("ngIf",t.couponProductError)}}function X(c,u){1&c&&(o.TgZ(0,"option",45),o._uU(1,"Buy 1 Get 1 Free"),o.qZA())}function oo(c,u){1&c&&(o.TgZ(0,"div",33),o._uU(1," Discount Type is required "),o.qZA())}function to(c,u){if(1&c&&(o.TgZ(0,"div",33),o._uU(1),o.qZA()),2&c){const t=o.oxw(2);o.xp6(1),o.hij(" ",t.discountValueError," ")}}function eo(c,u){if(1&c){const t=o.EpF();o.TgZ(0,"div",17),o.TgZ(1,"input",46),o.NdJ("input",function(i){return o.CHM(t),o.oxw().getDiscountValue(i)}),o.qZA(),o.YNc(2,to,2,1,"div",10),o.qZA()}if(2&c){const t=o.oxw();o.xp6(1),o.MGl("placeholder","",t.couponDiscountPlaceholder," Discount Value"),o.xp6(1),o.Q6J("ngIf",t.discountValueError)}}function io(c,u){if(1&c){const t=o.EpF();o.TgZ(0,"div",17),o.TgZ(1,"label",34),o._uU(2,"Choose Free Products "),o.qZA(),o.TgZ(3,"ngx-autocomplete",47),o.NdJ("click",function(){return o.CHM(t),o.oxw().checkValue()})("keyup",function(){return o.CHM(t),o.oxw().checkValue()})("selectedValue",function(i){return o.CHM(t),o.oxw().selectEvent(i)}),o.qZA(),o.TgZ(4,"p"),o._uU(5),o.qZA(),o.qZA()}if(2&c){const t=o.oxw();o.xp6(3),o.Q6J("searchKeyword","productDescriptionNew")("inputId","searchProduct")("placeholderValue","Search Products here by Product Name or Product ID")("entries",t.allFreeProducts),o.xp6(2),o.Oqu(t.freeProductName)}}function so(c,u){1&c&&o._UZ(0,"img",48)}function co(c,u){if(1&c){const t=o.EpF();o.TgZ(0,"div",49),o.TgZ(1,"div",50),o.TgZ(2,"button",51),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return i.hideFuntions(i.buttonTitle)}),o.TgZ(3,"span",52),o._uU(4,"\xd7"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(5,"div",53),o.TgZ(6,"h2"),o._uU(7,"Are You Sure?"),o.qZA(),o.TgZ(8,"p"),o._uU(9),o.qZA(),o.qZA(),o.TgZ(10,"div",54),o.TgZ(11,"button",55),o.NdJ("click",function(){return o.CHM(t),o.oxw().submit()}),o._uU(12,"Yes"),o.qZA(),o.TgZ(13,"button",56),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return i.hideFuntions(i.buttonTitle)}),o._uU(14,"No"),o.qZA(),o.qZA(),o.qZA()}if(2&c){const t=o.oxw();o.xp6(9),o.hij("Do you really want to ",t.buttonTitle," this data?")}}const N=function(){return{dateInputFormat:"YYYY-MM-DD"}};let U=(()=>{class c{constructor(t,e,i,s,n,r,l,a,h,m,I,_,P){this.couponService=t,this.formBuilder=e,this.productService=i,this.categoryService=s,this.recipeService=n,this.collectionService=r,this.searchString=l,this.toastr=a,this.activatedRoute=h,this.router=m,this.zone=I,this.datePipe=_,this.modalService=P,this.submitted=!1,this.showImages=!1,this.allProducts=[],this.allCollections=[],this.isCheckCouponCode=!1,this.isCheckCouponError=!1,this.couponType=!1,this.couponNew=!1,this.couponOr=!0,this.couponError=!1,this.couponProductError=!1,this.couponProductIDs=[],this.couponCategoriesID=[],this.couponSubCategoryId=[],this.couponCollectionsID=[],this.couponRecipesID=[],this.couponChooseProduct=!1,this.couponChooseRecipe=!1,this.couponChooseCollection=!1,this.couponProductOr=!0,this.couponCollectionOr=!0,this.couponDiscountValue=!1,this.classProduct="3",this.selectedRecipes=[],this.searchProducts=[],this.catIds=[],this.productsName=[],this.couponCalculatePrice=[],this.title="Add",this.buttonTitle="save",this.couponDiscountPrice=0,this.discountValue=0,this.maxDate=new Date,this.minDate=new Date,this.couponFreeProducts=!1,this.collectionProducts=[],this.collectionDescription=[],this.recipeProducts=[],this.freeProducts=[],this.productDescription=[],this.productDescription2=[],this.isLoaderImage=!1,this.subCategoryList=[],this.subCategoriesNames=[],this.subCatId=[]}ngOnInit(){this.couponForm=this.formBuilder.group({couponCode:["",[p.kI.required]],couponToDate:["",[p.kI.required]],couponFromDate:["",[p.kI.required]],usageLimitPerUser:["",[p.kI.required,p.kI.min(1)]],usageLimitDiscountCode:["",[p.kI.required,p.kI.min(1)]],discountType:["",[p.kI.required]],categoryId:[""],subCategoryId:[""],productId:[""],recipeId:[""],collectionId:[""],discountAmount:[""],discountValue:[""],freeProducts:[""],isGlobal:[""]}),this.getCountries(),this.getListRecipes(),this.allCouponList(),this.multiselectedVariables(),this.couponForm.valueChanges.subscribe(t=>{localStorage.setItem("isFormChanged",JSON.stringify(!0))})}multiselectedVariables(){this.getAllProductsName(),this.allCategoriesList(),this.getFreeProducts(),this.getListCollections(),this.dropdownSettings={idField:"productId",textField:"productDescription",allowSearchFilter:!0},this.freeProductsSettings={idField:"productId"},this.dropdownRecipeSettings={idField:"recipeId",textField:"recipeTitle",allowSearchFilter:!0},this.dropdownCategorySettings={idField:"categoryId",textField:"categoryId",allowSearchFilter:!0,singleSelection:!1},this.dropdownSubCategorySettings={idField:"subCategoryId",textField:"subCategoryId",allowSearchFilter:!0},this.dropdownCollectionsSettings={idField:"collectionId",textField:"collectionName",allowSearchFilter:!0},this.activatedRoute.params.subscribe(t=>{this.couponID=t.id,this.couponID&&(this.title="Edit",this.buttonTitle="update",this.getSingleCouponObject(this.couponID),this.getCouponDataWithId())})}get f(){return this.couponForm.controls}getCountries(){this.couponService.getCountriesList().subscribe(t=>{this.countryList=t.items})}getCities(t){this.couponService.getCitiesList(t.target.value).subscribe(e=>{this.getCitiesList=e.items})}getCouponDataWithId(){var t,e,i,s,n,r,l,a;let m;if(1!=this.couponDetail.isGlobal){(""!=this.couponDetail.categoryId||null!=this.couponDetail.categoryId)&&(m=null===(e=null===(t=this.couponDetail)||void 0===t?void 0:t.categoryId)||void 0===e?void 0:e.split(","),this.getProductsWithId(null===(i=this.couponDetail.categoryId)||void 0===i?void 0:i.split(",")),this.getSubCategoriesWithID(null===(s=this.couponDetail.categoryId)||void 0===s?void 0:s.split(","))),null===(n=this.couponDetail.productId)||void 0===n||n.split(",").forEach(f=>{this.searchString.transform("productId",this.productsName,f).forEach(b=>{f==b.productId&&this.productDescription.push({productId:b.productId,productDescription:b.productDescription})})});const I=this.getUniqueListBy(this.productDescription,"productId");this.couponDetail.productId&&this.calculateProductPrice(I,"products"),this.couponDetail.freeProducts.forEach(f=>{this.allFreeProducts.forEach(g=>{f.productId==g.productId&&this.productDescription2.push({productId:g.productId,productDescription:g.productDescription})})});const _=this.getUniqueListBy(this.productDescription2,"productId");1==_.length&&(this.freeProductName=_[0].productDescription),null===(r=this.couponDetail.collectionId)||void 0===r||r.split(",").forEach(f=>{this.allCollections.forEach(g=>{f==g.collectionId&&this.collectionDescription.push({collectionId:g.collectionId,collectionName:g.collectionName})})});const P=this.getUniqueListBy(this.collectionDescription,"collectionId");this.couponDetail.collectionId&&this.collectionData(P,"multiple"),""!=this.couponDetail.recipeId&&null!=this.couponDetail.recipeId&&(null===(l=this.couponDetail.recipeId)||void 0===l||l.split(",").forEach(f=>{var g;(null===(g=this.searchString)||void 0===g?void 0:g.transform("recipeId",this.allRecipes,f)).forEach(w=>{f==w.recipeId&&this.selectedRecipes.push(w)})}),this.recipeIDData=this.getUniqueListBy(this.selectedRecipes,"recipeId"),this.couponDetail.recipeId&&this.recipeData(this.recipeIDData,"multiple")),this.couponDetail.productId?(this.couponChooseProduct=!0,this.couponChooseRecipe=!1,this.couponProductOr=!1,this.couponChooseCollection=!1,this.couponCollectionOr=!1,this.classProduct="12"):this.couponDetail.recipeId?(this.couponChooseProduct=!1,this.couponChooseRecipe=!0,this.couponProductOr=!1,this.couponChooseCollection=!1,this.couponCollectionOr=!1,this.classProduct="12"):(this.couponChooseProduct=!1,this.couponChooseRecipe=!1,this.couponProductOr=!1,this.couponChooseCollection=!0,this.couponCollectionOr=!1,this.classProduct="12"),this.minFromToDate=this.couponDetail.couponFromDate,this.getDiscountType(this.couponDetail.discountType),this.discountValue=this.couponDetail.discountValue,this.couponForm.patchValue({productId:I,recipeId:this.recipeIDData,categoryId:m,subCategoryId:null===(a=this.couponDetail.subCategoryId)||void 0===a?void 0:a.split(","),couponCode:this.couponDetail.couponCode,collectionId:P,discountAmount:this.couponDetail.discountAmount,discountType:this.couponDetail.discountType,couponToDate:this.couponDetail.couponToDate,couponFromDate:this.couponDetail.couponFromDate,usageLimitPerUser:this.couponDetail.usageLimitPerUser,usageLimitDiscountCode:this.couponDetail.usageLimitDiscountCode,freeProducts:_,discountValue:this.couponDetail.discountValue})}else this.couponForm.patchValue(this.couponDetail),this.getDiscountType(this.couponDetail.discountType)}openModal(t){this.formValidations(t)}formValidations(t){var e,i,s;if(this.couponForm.value.couponToDate=this.datePipe.transform(this.couponForm.value.couponToDate,"yyyy-MM-dd"),this.couponForm.value.couponFromDate=this.datePipe.transform(this.couponForm.value.couponFromDate,"yyyy-MM-dd"),this.submitted=!0,this.couponForm.invalid)return void this.afterErrorChecked();if("Percent"==this.couponDiscountPlaceholder||"Fixed"==this.couponDiscountPlaceholder){if(!this.couponForm.value.discountValue)return void(this.discountValueError=this.couponDiscountPlaceholder+" Discount Value Required")}else this.discountValueError="";let n=this.checkCouponCode(this.couponForm.value.couponCode);if(this.couponID){if(this.couponDetail.couponCode==this.couponForm.value.couponCode)this.isCheckCouponError=!1;else if(1==n)return this.isCheckCouponError=!0,this.isCheckCouponCode=!1,void this.afterErrorChecked()}else{if(1==n)return this.isCheckCouponError=!0,this.isCheckCouponCode=!1,void this.afterErrorChecked();this.isCheckCouponError=!1}if(1!=this.couponForm.value.isGlobal){if((null==this.couponForm.value.recipeId||null==this.couponForm.value.recipeId||0==(null===(e=this.couponForm.value.recipeId)||void 0===e?void 0:e.length))&&(this.couponForm.value.recipeId=""),(0==(null===(i=this.couponForm.value.productId)||void 0===i?void 0:i.length)||null==this.couponForm.value.productId)&&(this.couponForm.value.productId=""),(0==(null===(s=this.couponForm.value.collectionId)||void 0===s?void 0:s.length)||null==this.couponForm.value.collectionId)&&(this.couponForm.value.collectionId=""),!(this.couponForm.value.productId||this.couponForm.value.recipeId||this.couponForm.value.collectionId))return this.couponProductError=!0,void this.afterErrorChecked();if(this.couponProductError=!1,this.couponForm.value.productId&&this.getProductIds(this.couponForm.value.productId),this.couponForm.value.recipeId&&this.getRecipeIds(this.couponForm.value.recipeId),this.couponForm.value.categoryId&&this.getCategoriesId(this.couponForm.value.categoryId),this.couponForm.value.collectionId&&this.getcollectionsId(this.couponForm.value.collectionId),this.couponForm.value.subCategoryId&&this.getSubCategoriesId(this.couponForm.value.subCategoryId),this.discountValueError)return void this.afterErrorChecked()}else if(this.couponForm.value.recipeId="",this.couponForm.value.productId="",this.couponForm.value.collectionId="",this.couponForm.value.categoryId="",this.discountValueError)return void this.afterErrorChecked();(""==this.couponForm.value.freeProducts||null==this.couponForm.value.freeProducts)&&(this.couponForm.value.freeProducts=[]),this.modalRef=this.modalService.show(t)}submit(){this.modalRef.hide(),this.isLoaderImage=!0,this.couponID?(this.couponForm.value.couponID=this.couponID,this.couponService.updateCoupon(this.couponForm.value).subscribe(t=>{t.success?(this.isLoaderImage=!1,this.toastr.success(t.message),this.zone.run(()=>{this.router.navigate(["/coupons"])})):this.toastr.success(t.message)})):this.couponService.addCoupon(this.couponForm.value).subscribe(t=>{t.success?(this.isLoaderImage=!1,this.toastr.success(t.message),this.zone.run(()=>{this.router.navigate(["/coupons"])})):this.toastr.success(t.message)})}getFreeProducts(){let t=this.productService.getAllProdData();this.allFreeProducts=JSON.parse(t);for(let e=0;e<this.allFreeProducts.length;e++){const i=this.allFreeProducts[e];i.productDescriptionNew=`${i.productDescription} (Product ID - ${i.productId})`}}checkValue(){var t=document.getElementById("searchProduct1").value;if(null!=t)if(""==t)null!=(e=document.getElementById("searchProduct2"))&&(e.style.display="none");else{var e;null!=(e=document.getElementById("searchProduct2"))&&(e.style.display="block")}}getAllProductsName(){let t=this.productService.getAllProdData();this.allProducts=JSON.parse(t)}allCategoriesList(){this.categoryService.getAllcategories().subscribe(t=>{this.allCategories=t.items.filter(function(e){return null!=e.categoryId})})}selectCategoryEvent(t){this.catIds=[],this.catIds.push({categoryId:t.categoryId}),this.getListRecipes(),this.subCategories(),this.couponForm.patchValue({recipeId:[],collectionId:[]})}onSelectAllCategory(t){let e,i=!1;t.forEach((s,n)=>{this.catIds.push({categoryId:s.categoryId})}),this.productsName=[],this.allProducts.forEach(s=>{i=!1,s.productDescription&&(this.productSalePrice=s.salesPrice,this.productavailableQuantity=s.availableQuantity,e=null!=s.agreementValue&&""!=s.agreementValue?s.agreementValue:s.salesPrice,(0==this.productSalePrice||null==this.productSalePrice||""==this.productSalePrice||null==this.productSalePrice||0==this.productavailableQuantity||null==this.productavailableQuantity||""==this.productavailableQuantity||null==this.productavailableQuantity)&&(i=!0),this.productsName.push({productId:s.productId,productDescription:s.productDescription,productPrice:e,isDisabled:i})),this.searchProducts=this.productsName.filter(function(n){return""!==n.productDescription})}),this.getListRecipes(),this.subCategories()}onDeSelectAllCategory(t){this.searchProducts=[]}DropDownClose(t){this.subCategoryNames=[],this.searchProducts=[],this.subCategoriesNames=[],this.catIds=[],this.subCategoryList=[]}onSelectAllProducts(t){this.calculateProductPrice(t,"products"),this.couponChooseProduct=!0,this.couponChooseRecipe=!1,this.couponProductOr=!1,this.couponChooseCollection=!1,this.couponCollectionOr=!1,this.classProduct="12",this.couponProductError=!1}DropDownProductClose(t){this.calculateProductPrice(t,"removeProduct"),0==this.couponForm.controls.productId.value.length&&(this.couponChooseProduct=!1,this.couponChooseRecipe=!1,this.couponProductOr=!0,this.couponChooseCollection=!1,this.couponCollectionOr=!0,this.classProduct="3")}onDeSelectProducts(t){this.calculateProductPrice(t,"products"),0==t.length&&(this.couponChooseProduct=!1,this.couponChooseRecipe=!1,this.couponProductOr=!0,this.couponChooseCollection=!1,this.couponCollectionOr=!0,this.classProduct="3")}getListRecipes(){this.recipeService.getRecipes().subscribe(e=>{this.recipeService.removeRecipeData(),this.allRecipes=e.items,this.recipeService.sendAllRecipesData(e.items)});const t=this.recipeService.getAllRecipesData();this.allRecipes=JSON.parse(t)}onItemSelectRecipe(t){this.recipeData(t,"single"),this.couponChooseProduct=!1,this.couponChooseRecipe=!0,this.couponProductOr=!1,this.couponChooseCollection=!1,this.couponCollectionOr=!1,this.classProduct="12",this.couponProductError=!1,this.clearData(),this.couponForm.patchValue({collectionId:[]})}onSelectAllRecipe(t){this.recipeData(t,"multiple"),this.couponChooseProduct=!1,this.couponChooseRecipe=!0,this.couponCollectionOr=!1,this.couponChooseCollection=!1,this.couponProductOr=!1,this.classProduct="12",this.couponProductError=!1}DropDownRecipeClose(t){this.recipeData(t,"removeRecipe"),0==this.couponForm.controls.recipeId.value.length&&(this.couponChooseProduct=!1,this.couponChooseRecipe=!1,this.couponProductOr=!0,this.couponChooseCollection=!1,this.couponCollectionOr=!0,this.classProduct="3")}onDeSelectRecipes(t){this.recipeData(t,"multiple"),0==t.length&&(this.couponChooseProduct=!1,this.couponChooseRecipe=!1,this.couponProductOr=!0,this.couponChooseCollection=!1,this.couponCollectionOr=!0,this.classProduct="3")}onItemSelect(t){this.calculateProductPrice(t,"singleProduct"),this.couponChooseProduct=!0,this.couponChooseRecipe=!1,this.couponProductOr=!1,this.couponChooseCollection=!1,this.couponCollectionOr=!1,this.couponProductError=!1,this.classProduct="12"}getListCollections(){this.collectionService.getAllCollection(1,1e3).subscribe(t=>{this.collectionService.removeCollectionsData(),this.allCollections=t.items,this.collectionService.sendAllCollectionsData(this.allCollections)}),this.allCollections=this.collectionService.getAlCollectionsData(),this.allCollections=JSON.parse(this.allCollections)}onItemSelectCollection(t){this.collectionData(t,"single"),this.couponChooseProduct=!1,this.couponChooseRecipe=!1,this.couponProductOr=!1,this.couponChooseCollection=!0,this.couponCollectionOr=!1,this.classProduct="12",this.couponProductError=!1,this.clearData(),this.couponForm.patchValue({recipeId:[]})}onSelectAllCollection(t){this.collectionData(t,"multiple"),this.couponChooseProduct=!1,this.couponChooseRecipe=!1,this.couponProductOr=!1,this.couponCollectionOr=!1,this.couponChooseCollection=!0,this.classProduct="12",this.couponProductError=!1,this.clearData(),this.couponForm.patchValue({recipeId:[]})}DropDownCollectionClose(t){this.collectionData(t,"removeCollection"),0==this.couponForm.controls.collectionId.value.length&&(this.couponChooseProduct=!1,this.couponChooseRecipe=!1,this.couponProductOr=!0,this.couponChooseCollection=!1,this.couponCollectionOr=!0,this.classProduct="3")}onDeSelectCollections(t){this.collectionData(t,"multiple"),0==t.length&&(this.couponChooseProduct=!1,this.couponChooseRecipe=!1,this.couponProductOr=!0,this.couponChooseCollection=!1,this.couponCollectionOr=!0,this.classProduct="3")}onfreeItemSelect(t){}onSelectAllFreeProducts(t){}DropDownFreeProductClose(t){}onDeSelectFreeProducts(t){}getUniqueListBy(t,e){return[...new Map(null==t?void 0:t.map(i=>[i[e],i])).values()]}getProductIds(t){this.couponProductIDs=[],null==t||t.forEach(e=>{this.couponProductIDs.push(e.productId)}),this.couponForm.value.productId=this.couponProductIDs.join(",")}getRecipeIds(t){t.forEach(e=>{this.couponRecipesID.push(e.recipeId)}),this.couponForm.value.recipeId=this.couponRecipesID.join(",")}getCategoriesId(t){t.forEach(e=>{this.couponCategoriesID.push((null==e?void 0:e.categoryId)?e.categoryId:e)}),this.couponForm.value.categoryId=this.couponCategoriesID.join(",")}getSubCategoriesWithID(t){console.log(t),null==t||t.forEach(e=>{console.log(e);const i=new FormData;i.append("categoryId",e),this.categoryService.getAllSubcategories(i).subscribe(s=>{console.log(s),this.subCategoryList.push(s.items),this.subCategoryName(this.subCategoryList)})})}getSubCategoriesId(t){t.forEach(e=>{this.couponSubCategoryId.push((null==e?void 0:e.subCategoryId)?e.subCategoryId:e)}),this.couponForm.value.subCategoryId=this.couponSubCategoryId.join(",")}getcollectionsId(t){t.forEach(e=>{this.couponCollectionsID.push((null==e?void 0:e.collectionId)?e.collectionId:e)}),this.couponForm.value.collectionId=this.couponCollectionsID.join(",")}getProductsWithId(t){let e=!1;null==t||t.forEach(s=>{this.catIds.push({categoryId:s})}),this.catIds.forEach(s=>{this.searchString.transform("categoryId",this.allProducts,s.categoryId).forEach(r=>{e=!1,r.productDescription&&(this.productSalePrice=r.salesPrice,this.productavailableQuantity=r.availableQuantity,(0==this.productSalePrice||null==this.productSalePrice||""==this.productSalePrice||null==this.productSalePrice||0==this.productavailableQuantity||null==this.productavailableQuantity||""==this.productavailableQuantity||null==this.productavailableQuantity)&&(e=!0),this.productsName.push({productId:r.productId,productDescription:r.productDescription,isDisabled:e}))}),this.searchProducts=this.productsName.filter(function(r){return""!==r.productDescription})}),this.getListRecipes()}getDiscountValue(t){var e;let i;this.discountValue=null===(e=t.target)||void 0===e?void 0:e.value,null==this.discountValue&&(this.discountValue=t),this.couponForm.patchValue({discountAmount:this.discountValue}),"Percent"==this.couponDiscountType?1!=this.couponForm.value.isGlobal?0==this.couponDiscountPrice?this.discountValueError="Please Choose Products OR Choose Recipes OR Choose Collections":this.discountValue>99?this.discountValueError="Please enter a value less than 99":(this.discountValueError="",i=this.couponDiscountPrice*this.discountValue/100):this.discountValueError=this.discountValue>99?"Please enter a value less than 99":"":"Fixed"==this.couponDiscountType&&1!=this.couponForm.value.isGlobal&&(0==this.couponDiscountPrice?this.discountValueError="Please Choose Products OR Choose Recipes OR Choose Collections":this.couponDiscountPrice<this.discountValue?this.discountValueError="Please enter a value less than "+this.couponDiscountPrice:(this.discountValueError="",i=this.discountValue))}getDiscountType(t){var e;switch(this.couponDiscountType=null===(e=t.target)||void 0===e?void 0:e.value,null==this.couponDiscountType&&(this.couponDiscountType=t),this.couponDiscountType){case"BOGO":this.couponFreeProducts=!0,this.couponDiscountValue=!1,this.couponDiscountPlaceholder="";break;case"Free Delivery":this.couponFreeProducts=!1,this.couponDiscountValue=!1,this.couponDiscountPlaceholder="";break;case"Percent":this.couponFreeProducts=!1,this.couponDiscountValue=!0,this.couponDiscountPlaceholder="Percent";break;case"Fixed":this.couponFreeProducts=!1,this.couponDiscountValue=!0,this.couponDiscountPlaceholder="Fixed"}}calculateProductPrice(t,e){let i,s=this;"singleProduct"==e?this.allProducts.filter(function(n){n.productId==t.productId&&(s.productavailableQuantity=n.availableQuantity,null!=n.agreementValue&&""!=n.agreementValue?(i=n.agreementValue,s.productSalePrice=n.salesPrice):(i=n.salesPrice,s.productSalePrice=n.salesPrice),s.couponCalculatePrice.push({productId:n.productId,productDescription:n.productDescription,productPrice:i}))}):"removeProduct"==e?this.couponCalculatePrice.forEach((n,r)=>{n.productId==t.productId&&this.couponCalculatePrice.splice(r,1)}):(this.couponCalculatePrice=[],t.filter(function(n){s.allProducts.filter(function(r){r.productId==n.productId&&(i=null!=r.agreementValue&&""!=r.agreementValue?r.agreementValue:r.salesPrice,s.couponCalculatePrice.push({productId:r.productId,productDescription:r.productDescription,productPrice:i}))})})),this.couponDiscountPrice=this.couponCalculatePrice.reduce(function(n,r){return n+r.productPrice},0),this.discountValue&&this.getDiscountValue(this.discountValue)}recipeData(t,e){let i=this;"single"==e?this.allRecipes.filter(function(s){s.recipeId==t.recipeId&&s.ingredientToSale.filter(function(n){i.recipeProducts.push({productId:n.productId})})}):"multiple"==e?(this.recipeProducts=[],t.forEach(s=>{this.allRecipes.filter(function(n){n.recipeId==s.recipeId&&n.ingredientToSale.filter(function(r){i.recipeProducts.push({productId:r.productId})})})})):"removeRecipe"==e&&this.allRecipes.filter(function(s){s.recipeId==t.recipeId&&s.ingredientToSale.filter(function(n){i.recipeProducts.filter(function(r,l){n.productId==r.productId&&i.recipeProducts.splice(l,1)})})}),i.recipeProducts&&(i.recipeProducts=this.getUniqueListBy(i.recipeProducts,"productId")),this.calculateProductPrice(i.recipeProducts,"products")}collectionData(t,e){let i,s,n=this;"single"==e?this.allCollections.filter(function(r){r.collectionId==t.collectionId&&(null!=r.productId||r.productId?(i=r.productId.split(","),i.forEach(l=>{n.allProducts.filter(function(a){a.productId==l&&n.collectionProducts.push({productId:a.productId})})})):(s=r.recipeId.split(","),s.forEach(l=>{n.allRecipes.filter(function(a){a.recipeId==l&&a.ingredientToSale.filter(function(h){n.collectionProducts.push({productId:h.productId})})})})))}):"removeCollection"==e?this.allCollections.filter(function(r){r.collectionId==t.collectionId&&(null!=r.productId||r.productId?(i=r.productId.split(","),i.forEach(l=>{n.collectionProducts.filter(function(a,h){a.productId==l&&n.collectionProducts.splice(h,1)})})):(s=r.recipeId.split(","),s.forEach(l=>{n.allRecipes.filter(function(a){a.recipeId==l&&a.ingredientToSale.filter(function(h,m){n.collectionProducts.filter(function(I,_){h.productId==I.productId&&n.collectionProducts.splice(_,1)})})})})))}):"multiple"==e&&(this.collectionProducts=[],t.forEach(r=>{this.allCollections.filter(function(l){l.collectionId==r.collectionId&&(null!=l.productId||l.productId?(i=l.productId.split(","),i.forEach(a=>{n.allProducts.filter(function(h){h.productId==a&&n.collectionProducts.push({productId:h.productId})})})):(s=l.recipeId.split(","),s.forEach(a=>{n.allRecipes.filter(function(h){h.recipeId==a&&h.ingredientToSale.filter(function(m){n.collectionProducts.push({productId:m.productId})})})})))})})),n.collectionProducts&&(n.collectionProducts=this.getUniqueListBy(n.collectionProducts,"productId")),this.calculateProductPrice(n.collectionProducts,"products")}getSingleCouponObject(t){if(this.couponService.currentObject.subscribe(e=>this.couponObj=e),this.couponObj)this.couponDetail=this.couponObj,this.couponService.clearcouponData(),this.couponService.sendcouponData(this.couponObj);else{const e=this.couponService.getcouponData();this.couponDetail=JSON.parse(e)}}selectEvent(t){var e;this.couponForm.value.freeProducts=[];let i=parseInt(t.productId);this.freeProductName=t.productDescription,this.couponForm.value.freeProducts=this.couponID?[{productId:i,freeProductId:null===(e=this.couponDetail.freeProducts[0])||void 0===e?void 0:e.freeProductId,couponId:this.couponID}]:[{productId:i}]}forceUppercaseConditionally(t){this.couponForm.patchValue({couponCode:t.target.value.toUpperCase()})}checkCouponCode(t){let e=this.couponService.getAllcouponData();return e=JSON.parse(e),e.forEach(i=>{t==i.couponCode&&(this.isCheckCouponCode=!0)}),this.isCheckCouponCode}allCouponList(){this.couponService.getCoupon().subscribe(t=>{this.couponService.clearAllcouponData(),this.couponService.sendAllcouponData(t.item)})}afterErrorChecked(){window.scrollTo({top:0,behavior:"smooth"})}changeMinDate(){this.minFromToDate=new Date(this.couponForm.value.couponFromDate)}subCategories(){this.subCategoryList=[],this.catIds.forEach(t=>{const e=new FormData;e.append("categoryId",t.categoryId),this.categoryService.getAllSubcategories(e).subscribe(i=>{this.subCategoryList.push(i.items),this.subCategoryName(this.subCategoryList)})})}subCategoryName(t){this.subCategoriesNames=[],t[0].forEach(e=>{this.subCategoriesNames.push({subCategoryId:e.subCategoryId})}),this.subCategoryNames=this.subCategoriesNames}selectSubCategoryEvent(t){var e;this.subCatId.push({subCategoryId:t.subCategoryId}),this.dataForSingleSubcategories(null===(e=this.catIds[0])||void 0===e?void 0:e.categoryId,t.subCategoryId)}onSelectAllSubCategory(t){var e;this.subCatId=t,this.searchProducts=[],this.dataForAllSubcategories(null===(e=this.catIds[0])||void 0===e?void 0:e.categoryId)}DropSubClose(t){let e=!1;this.subCatId.forEach((i,s)=>{i.subCategoryId==t.subCategoryId&&this.subCatId.splice(s,1)}),0===this.subCatId.length&&(this.searchProducts=[]),this.productsName=[],this.subCatId=this.subCatId.filter(function(i){return""!==i.subCategoryId}),this.subCatId.forEach(i=>{i.subCategoryId!=t.subCategoryId&&(this.searchString.transform2("categoryId","subCategoryId",this.allProducts,this.catIds[0].categoryId,i.subCategoryId).forEach(l=>{l.productDescription&&(e=!1,this.productSalePrice=l.salesPrice,this.productavailableQuantity=l.availableQuantity,(0==this.productSalePrice||null==this.productSalePrice||""==this.productSalePrice||null==this.productSalePrice||0==this.productavailableQuantity||null==this.productavailableQuantity||""==this.productavailableQuantity||null==this.productavailableQuantity)&&(e=!0),this.productsName.push({productId:l.productId,productDescription:l.productDescription,isDisabled:e}))}),this.searchProducts=this.productsName.filter(function(l){return""!==l.productDescription}))})}onDeSelectAllSubCategory(t){this.searchProducts=[]}dataForAllSubcategories(t){let s=!1;this.searchString.transform("categoryId",this.allProducts,t).forEach(r=>{r.productDescription&&(s=!1,this.productSalePrice=r.salesPrice,this.productavailableQuantity=r.availableQuantity,(0==this.productSalePrice||null==this.productSalePrice||""==this.productSalePrice||null==this.productSalePrice||0==this.productavailableQuantity||null==this.productavailableQuantity||""==this.productavailableQuantity||null==this.productavailableQuantity)&&(s=!0),this.productsName.push({productId:r.productId,productDescription:r.productDescription,isDisabled:s}))}),this.searchProducts=this.productsName.filter(function(r){return""!==r.productDescription})}dataForSingleSubcategories(t,e){let r=!1;this.searchString.transform2("categoryId","subCategoryId",this.allProducts,t,e).forEach(a=>{a.productDescription&&(r=!1,this.productSalePrice=a.salesPrice,this.productavailableQuantity=a.availableQuantity,(0==this.productSalePrice||null==this.productSalePrice||""==this.productSalePrice||null==this.productSalePrice||0==this.productavailableQuantity||null==this.productavailableQuantity||""==this.productavailableQuantity||null==this.productavailableQuantity)&&(r=!0),this.productsName.push({productId:a.productId,productDescription:a.productDescription,isDisabled:r}))}),this.searchProducts=this.productsName.filter(function(a){return""!==a.productDescription})}hideFuntions(t){"update"==t?(this.modalRef.hide(),this.router.navigate(["/coupons"])):this.modalRef.hide()}clearData(){this.couponForm.patchValue({categoryId:"",subCategoryId:"",productId:""}),this.subCategoryNames=[],this.searchProducts=[]}}return c.\u0275fac=function(t){return new(t||c)(o.Y36(T),o.Y36(p.qu),o.Y36(V.M),o.Y36(L.d),o.Y36(M.j),o.Y36(Q.a),o.Y36(A.K),o.Y36(x._W),o.Y36(D.gz),o.Y36(D.F0),o.Y36(o.R0b),o.Y36(C.uU),o.Y36(J.tT))},c.\u0275cmp=o.Xpm({type:c,selectors:[["app-add-coupons"]],decls:66,vars:24,consts:[[1,"app-main__inner"],[1,"tab-content"],[1,"user-header"],[1,"address-info-form"],[3,"formGroup"],["type","hidden","name","discountAmount","formControlName","discountAmount"],[1,"form-row"],[1,"form-group","col-md-6"],["for","inputEmail4"],["type","text","name","couponCode","formControlName","couponCode","placeholder","Coupon Code",1,"form-control",3,"input"],["class","invalid-formdata",4,"ngIf"],["for","inputPassword4"],["type","number","min","0","name","usageLimitPerUser","formControlName","usageLimitPerUser","id","inputPassword4","placeholder","Usage Limit",1,"form-control"],[1,"form-group","col-md-4"],["type","number","id","inputEmail4","min","0","name","usageLimitDiscountCode","formControlName","usageLimitDiscountCode","placeholder","Usage of Discount Code",1,"form-control"],["type","text","name","couponFromDate","bsDatepicker","","autocomplete","off","readonly","","formControlName","couponFromDate","id","inputPassword4","placeholder","From Date",1,"form-control",3,"minDate","bsConfig"],["type","text","name","couponToDate","bsDatepicker","","autocomplete","off","readonly","","formControlName","couponToDate","id","inputEmail4","placeholder","To Date",1,"form-control",3,"minDate","bsConfig","click"],[1,"form-group"],["for","inputPassword4",1,"isglobalcupons"],["type","checkbox","formControlName","isGlobal","id","3",1,"form-check-input","isglobal"],["class","form-row",4,"ngIf"],["for","exampleFormControlSelect2"],["id","exampleFormControlSelect2","name","discountType","formControlName","discountType",1,"form-control",3,"change"],["value",""],["value","Percent"],["value","Fixed"],["value","Free Delivery"],["value","BOGO",4,"ngIf"],["class","form-group",4,"ngIf"],[1,"info-per-btn"],["type","submit",1,"save-btn",3,"disabled","click"],["src","assets/images/formload.gif","class","form-button-loader",4,"ngIf"],["template",""],[1,"invalid-formdata"],["for","inputAddress"],["formControlName","categoryId",3,"settings","data","onSelect","onSelectAll","onDeSelect","onDeSelectAll"],["formControlName","subCategoryId",3,"settings","data","onSelect","onSelectAll","onDeSelect","onDeSelectAll"],[1,"form-group","col-md-3"],["formControlName","productId",3,"settings","data","onSelect","onSelectAll","onDeSelect","onDeSelectAll"],[1,"col-md-1","m-auto"],[1,"devider-class"],["formControlName","recipeId",3,"settings","data","onSelect","onSelectAll","onDeSelect","onDeSelectAll"],["formControlName","collectionId",3,"settings","data","onSelect","onSelectAll","onDeSelect","onDeSelectAll"],["class","invalid-formdatas",4,"ngIf"],[1,"invalid-formdatas"],["value","BOGO"],["type","number","name","discountValue","min","0","formControlName","discountValue",1,"form-control",3,"placeholder","input"],[3,"searchKeyword","inputId","placeholderValue","entries","click","keyup","selectedValue"],["src","assets/images/formload.gif",1,"form-button-loader"],[1,"customer-delete-model"],[1,"modal-header"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary","save-btn",3,"click"],["type","button",1,"btn","cancel-btn",3,"click"]],template:function(t,e){if(1&t){const i=o.EpF();o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"div",2),o.TgZ(3,"h3"),o._uU(4),o.qZA(),o.qZA(),o.TgZ(5,"section",3),o.TgZ(6,"form",4),o._UZ(7,"input",5),o.TgZ(8,"div",6),o.TgZ(9,"div",7),o.TgZ(10,"label",8),o._uU(11,"Coupon Code"),o.qZA(),o.TgZ(12,"input",9),o.NdJ("input",function(n){return e.forceUppercaseConditionally(n)}),o.qZA(),o.YNc(13,k,2,0,"div",10),o.YNc(14,Y,2,0,"div",10),o.qZA(),o.TgZ(15,"div",7),o.TgZ(16,"label",11),o._uU(17,"Usage Limit Per User"),o.qZA(),o._UZ(18,"input",12),o.YNc(19,H,2,0,"div",10),o.YNc(20,j,2,0,"div",10),o.qZA(),o.qZA(),o.TgZ(21,"div",6),o.TgZ(22,"div",13),o.TgZ(23,"label",8),o._uU(24,"Usage of Discount Code"),o.qZA(),o._UZ(25,"input",14),o.YNc(26,B,2,0,"div",10),o.YNc(27,G,2,0,"div",10),o.qZA(),o.TgZ(28,"div",13),o.TgZ(29,"label",11),o._uU(30,"From Date"),o.qZA(),o._UZ(31,"input",15),o.YNc(32,z,2,0,"div",10),o.qZA(),o.TgZ(33,"div",13),o.TgZ(34,"label",8),o._uU(35,"To Date"),o.qZA(),o.TgZ(36,"input",16),o.NdJ("click",function(){return e.changeMinDate()}),o.qZA(),o.YNc(37,W,2,0,"div",10),o.qZA(),o.TgZ(38,"div",17),o.TgZ(39,"label",18),o._UZ(40,"input",19),o.TgZ(41,"span"),o._uU(42,"Coupon for all Products"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.YNc(43,$,30,11,"div",20),o.TgZ(44,"div",17),o.TgZ(45,"label",21),o._uU(46,"Discount Type"),o.qZA(),o.TgZ(47,"select",22),o.NdJ("change",function(n){return e.getDiscountType(n)}),o.TgZ(48,"option",23),o._uU(49,"Discount Type"),o.qZA(),o.TgZ(50,"option",24),o._uU(51,"Percent"),o.qZA(),o.TgZ(52,"option",25),o._uU(53,"Fixed"),o.qZA(),o.TgZ(54,"option",26),o._uU(55,"Free Delivery"),o.qZA(),o.YNc(56,X,2,0,"option",27),o.qZA(),o.YNc(57,oo,2,0,"div",10),o.qZA(),o.YNc(58,eo,3,2,"div",28),o.YNc(59,io,6,5,"div",28),o.TgZ(60,"div",29),o.TgZ(61,"button",30),o.NdJ("click",function(){o.CHM(i);const n=o.MAs(65);return e.openModal(n)}),o._uU(62),o.qZA(),o.YNc(63,so,1,0,"img",31),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.YNc(64,co,15,1,"ng-template",null,32,o.W1O)}2&t&&(o.xp6(4),o.hij("",e.title," Coupon "),o.xp6(2),o.Q6J("formGroup",e.couponForm),o.xp6(7),o.Q6J("ngIf",e.submitted&&e.f.couponCode.errors),o.xp6(1),o.Q6J("ngIf",e.isCheckCouponError),o.xp6(5),o.Q6J("ngIf",e.submitted&&e.f.usageLimitPerUser.errors&&!(null!=e.f.usageLimitPerUser.errors&&e.f.usageLimitPerUser.errors.min)),o.xp6(1),o.Q6J("ngIf",null==e.f.usageLimitPerUser.errors?null:e.f.usageLimitPerUser.errors.min),o.xp6(6),o.Q6J("ngIf",e.submitted&&e.f.usageLimitDiscountCode.errors&&!(null!=e.f.usageLimitDiscountCode.errors&&e.f.usageLimitDiscountCode.errors.min)),o.xp6(1),o.Q6J("ngIf",null==e.f.usageLimitDiscountCode.errors?null:e.f.usageLimitDiscountCode.errors.min),o.xp6(4),o.Q6J("minDate",e.minDate)("bsConfig",o.DdM(22,N)),o.xp6(1),o.Q6J("ngIf",e.submitted&&e.f.couponFromDate.errors),o.xp6(4),o.Q6J("minDate",e.minFromToDate)("bsConfig",o.DdM(23,N)),o.xp6(1),o.Q6J("ngIf",e.submitted&&e.f.couponToDate.errors),o.xp6(6),o.Q6J("ngIf",1!=e.f.isGlobal.value),o.xp6(13),o.Q6J("ngIf",1!=e.f.isGlobal.value),o.xp6(1),o.Q6J("ngIf",e.submitted&&e.f.discountType.errors),o.xp6(1),o.Q6J("ngIf",e.couponDiscountValue),o.xp6(1),o.Q6J("ngIf",e.couponFreeProducts),o.xp6(2),o.Q6J("disabled",e.isLoaderImage),o.xp6(1),o.Oqu(e.buttonTitle),o.xp6(1),o.Q6J("ngIf",e.isLoaderImage))},directives:[p._Y,p.JL,p.sg,p.Fj,p.JJ,p.u,C.O5,p.qQ,p.wV,Z.Y5,Z.Np,p.Wl,p.EJ,p.YN,p.Kr,F.OP,q.$F],styles:[".form-group[_ngcontent-%COMP%]{position:relative}.invalid-formdatas[_ngcontent-%COMP%]{color:red}.invalid-formdata[_ngcontent-%COMP%]{position:absolute;bottom:-17px;right:0;background-color:red;color:#fff;font-size:12px;padding:0 5px}.address-info-form[_ngcontent-%COMP%]{overflow:inherit}label.isglobalcupons[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;padding-left:29px}.isglobal[_ngcontent-%COMP%]{padding-left:0!important;float:left;width:65px!important;box-shadow:none!important}.save-btn[_ngcontent-%COMP%]{text-transform:capitalize}"]}),c})();var no=d(9861),S=d(8265);const ro=function(c){return["/coupons/edit",c]};function uo(c,u){if(1&c){const t=o.EpF();o.TgZ(0,"tr"),o.TgZ(1,"td"),o._uU(2),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.ALo(5,"date"),o.qZA(),o.TgZ(6,"td"),o._uU(7),o.ALo(8,"date"),o.qZA(),o.TgZ(9,"td"),o._uU(10),o.qZA(),o.TgZ(11,"td"),o.TgZ(12,"a",22),o.NdJ("click",function(){const s=o.CHM(t).$implicit;return o.oxw().sendObject(s)}),o._UZ(13,"i",23),o.qZA(),o.TgZ(14,"a",24),o.NdJ("click",function(){const s=o.CHM(t).$implicit;return o.oxw().openDeletePopup(s.couponId)}),o._UZ(15,"i",25),o.qZA(),o.qZA(),o.qZA()}if(2&c){const t=u.$implicit,e=u.index;o.xp6(2),o.Oqu(e+1),o.xp6(2),o.Oqu(o.xi3(5,5,t.couponFromDate,"longDate")),o.xp6(3),o.Oqu(o.xi3(8,8,t.couponToDate,"longDate")),o.xp6(3),o.Oqu(t.couponCode),o.xp6(2),o.Q6J("routerLink",o.VKq(11,ro,t.couponId))}}function lo(c,u){1&c&&(o.TgZ(0,"div"),o.TgZ(1,"p",26),o._uU(2,"Record Not Found"),o.qZA(),o.qZA())}function ao(c,u){if(1&c){const t=o.EpF();o.TgZ(0,"pagination-controls",27),o.NdJ("pageChange",function(i){return o.CHM(t),o.oxw().p=i}),o.qZA()}}const po=function(){return["/coupons/add"]},ho=function(c,u){return{itemsPerPage:10,currentPage:c,totalItems:u}},go=[{path:"",component:(()=>{class c{constructor(t,e,i,s,n){this.couponService=t,this.spinner=e,this.toastr=i,this.zone=s,this.serchString=n,this.p=1}ngOnInit(){this.spinner.show(),this.allCouponList()}openDeletePopup(t){this.couponId="",this.couponId=t,console.log(this.couponId)}couponDelete(){const t=this;this.couponService.deleteCoupon(this.couponId).subscribe(e=>{e.success?(t.zone.run(()=>{this.allCouponList()}),this.toastr.success(e.message)):this.toastr.success(e.message)})}allCouponList(){this.couponService.getCoupon().subscribe(t=>{this.couponData=t.item,this.total=t.item.length,this.spinner.hide()})}sendObject(t){this.couponService.changeObject(t)}}return c.\u0275fac=function(t){return new(t||c)(o.Y36(T),o.Y36(no.t2),o.Y36(x._W),o.Y36(o.R0b),o.Y36(A.K))},c.\u0275cmp=o.Xpm({type:c,selectors:[["app-coupons"]],decls:45,vars:11,consts:[[1,"app-main__inner"],[1,"add-new-cus"],[3,"routerLink"],[1,"user-header","customers-header"],[1,"user-list-table"],[1,"table"],[1,"",2,"background-color","#8eb73b"],["scope","col"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"pageChange",4,"ngIf"],["id","exampleModalCenter","tabindex","-1","role","dialog","aria-labelledby","exampleModalCenterTitle","aria-hidden","true",1,"modal","fade","customer-delete-model"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalCenterTitle",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary","save-btn",3,"click"],["type","button","data-dismiss","modal","aria-label","Close",1,"btn","cancel-btn"],[1,"edit-btn",3,"routerLink","click"],["aria-hidden","true",1,"fa","fa-pencil"],["href","","type","button","data-toggle","modal","data-target","#exampleModalCenter",1,"cross-btn-table",3,"click"],["aria-hidden","true",1,"fa","fa-times"],[2,"text-align","center","font-size","20px","padding-top","10px"],[3,"pageChange"]],template:function(t,e){1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"a",2),o._uU(3,"Add New Coupon"),o.qZA(),o.qZA(),o.TgZ(4,"div",3),o.TgZ(5,"h3"),o._uU(6,"My Coupons List "),o.qZA(),o.qZA(),o.TgZ(7,"div",4),o.TgZ(8,"table",5),o.TgZ(9,"thead",6),o.TgZ(10,"tr"),o.TgZ(11,"th",7),o._uU(12,"S No."),o.qZA(),o.TgZ(13,"th",7),o._uU(14," From Date"),o.qZA(),o.TgZ(15,"th",7),o._uU(16," To Date"),o.qZA(),o.TgZ(17,"th",7),o._uU(18,"Coupon Code"),o.qZA(),o.TgZ(19,"th",7),o._uU(20,"Action"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(21,"tbody"),o.YNc(22,uo,16,13,"tr",8),o.ALo(23,"paginate"),o.qZA(),o.qZA(),o.qZA(),o.YNc(24,lo,3,0,"div",9),o.YNc(25,ao,1,0,"pagination-controls",10),o.qZA(),o.TgZ(26,"div",11),o.TgZ(27,"div",12),o.TgZ(28,"div",13),o.TgZ(29,"div",14),o.TgZ(30,"h5",15),o._uU(31,"Delete Coupon"),o.qZA(),o.TgZ(32,"button",16),o.TgZ(33,"span",17),o._uU(34,"\xd7"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(35,"div",18),o.TgZ(36,"h2"),o._uU(37,"Are You Sure?"),o.qZA(),o.TgZ(38,"p"),o._uU(39,"Do you really want to delete this Coupon data?"),o.qZA(),o.qZA(),o.TgZ(40,"div",19),o.TgZ(41,"button",20),o.NdJ("click",function(){return e.couponDelete()}),o._uU(42,"Delete"),o.qZA(),o.TgZ(43,"button",21),o._uU(44,"Cancel"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&t&&(o.xp6(2),o.Q6J("routerLink",o.DdM(7,po)),o.xp6(20),o.Q6J("ngForOf",o.xi3(23,4,e.couponData,o.WLB(8,ho,e.p,e.total))),o.xp6(2),o.Q6J("ngIf",""==e.couponData),o.xp6(1),o.Q6J("ngIf",""!=e.couponData&&e.total>10))},directives:[D.yS,C.sg,C.O5,S.LS],pipes:[S._s,C.uU],styles:[""]}),c})()},{path:"add",component:U},{path:"edit/:id",component:U}];let fo=(()=>{class c{}return c.\u0275fac=function(t){return new(t||c)},c.\u0275mod=o.oAB({type:c}),c.\u0275inj=o.cJS({imports:[[D.Bz.forChild(go)],D.Bz]}),c})();var Co=d(701);let mo=(()=>{class c{}return c.\u0275fac=function(t){return new(t||c)},c.\u0275mod=o.oAB({type:c}),c.\u0275inj=o.cJS({providers:[A.K,C.uU],imports:[[C.ez,fo,p.UX,q.c8,p.u5,S.JX,F.ZQ.forRoot(),Z.kn.forRoot(),Co.QG]]}),c})()}}]);